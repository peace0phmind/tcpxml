- name: "pos"
  description: "轴位置"
  requestFormat: "<axes><req>yes</req><auto>yes</auto><sub>pos</sub></axes>\n"
  responseIf: "count(/axes/sub[text() = 'pos']) > 0"
  items:
    - name: "pos_ax1"
      description: "1轴位置"
      xQuery: "string(/axes/ax1/text())"
      type: "string"
    - name: "pos_ax2"
      description: "2轴位置"
      xQuery: "string(/axes/ax2/text())"
      type: "string"
    - name: "pos_ax3"
      description: "3轴位置"
      xQuery: "string(/axes/ax3/text())"
      type: "string"
    - name: "pos_ax4"
      description: "4轴位置"
      xQuery: "string(/axes/ax4/text())"
      type: "string"
    - name: "pos_ax5"
      description: "5轴位置"
      xQuery: "string(/axes/ax5/text())"
      type: "string"
    - name: "pos_ax6"
      description: "6轴位置"
      xQuery: "string(/axes/ax6/text())"
      type: "string"
    - name: "pos_ax7"
      description: "7轴位置"
      xQuery: "string(/axes/ax7/text())"
      type: "string"


- name: "vel"
  description: "轴速度"
  requestFormat: "<axes><req>yes</req><auto>yes</auto><sub>vel</sub></axes>\n"
  responseIf: "count(/axes/sub[text() = 'vel']) > 0"
  items:
    - name: "vel_ax1"
      description: "1轴速度"
      xQuery: "number(/axes/ax1/text())"
      type: "int"
    - name: "vel_ax2"
      description: "2轴速度"
      xQuery: "number(/axes/ax2/text())"
      type: "int"
    - name: "vel_ax3"
      description: "3轴速度"
      xQuery: "number(/axes/ax3/text())"
      type: "int"
    - name: "vel_ax4"
      description: "4轴速度"
      xQuery: "number(/axes/ax4/text())"
      type: "int"
    - name: "vel_ax5"
      description: "5轴速度"
      xQuery: "number(/axes/ax5/text())"
      type: "int"
    - name: "vel_ax6"
      description: "6轴速度"
      xQuery: "number(/axes/ax6/text())"
      type: "int"
    - name: "vel_ax7"
      description: "7轴速度"
      xQuery: "number(/axes/ax7/text())"
      type: "int"


- name: "basis"
  description: "当前NC程序段"
  requestFormat: "<blocks><sub>basis</sub><auto>yes</auto></blocks>\n"
  responseIf: "count(/blocks/sub[text() = 'basis']) > 0"
  items:
    - name: "basis_act"
      description: "当前程序段"
      xQuery: "string(/blocks/act/text())"
      type: "string"
    - name: "basis_pas"
      description: "预读程序段"
      xQuery: "string(/blocks/pas/text())"
      type: "string"
    - name: "basis_temp"
      description: "缓存程序段"
      xQuery: "string(/blocks/temp/text())"
      type: "string"


- name: "exe"
  description: "当前NC程序路径"
  requestFormat: "<dir><sub>exe</sub></dir>\n"
  responseIf: "count(/dir/sub[text() = 'exe']) > 0"
  items:
    - name: "exe_name"
      description: "文件名"
      xQuery: "string(/dir/name/text())"
      type: "string"
    - name: "exe_path"
      description: "文件所在路径"
      xQuery: "string(/dir/path/text())"
      type: "string"


- name: "status"
  description: "机床状态"
  requestFormat: "<ncda><var>status</var><auto>yes</auto></ncda>\n"
  responseIf: "count(/ncda/status) > 0"
  items:
    - name: "status"
      description: "机床状态(1,2,3:急停;4:停止;5:准备;6:运行)"
      xQuery: "number(/ncda/status/text())"
      type: "int"


- name: "mode"
  description: "机床模式"
  requestFormat: "<ncda><var>mode,mmode,amode</var><auto>yes</auto></ncda>\n"
  responseIf: "count(/ncda/amode | mmode | mode) > 0"
  items:
    - name: "mode"
      description: "mode(0:自动模式;1:单段模式;2:MDI;3:手动模式;4:内存模式;5:回原点模式;255:模式未选择)"
      xQuery: "number(/ncda/mode/text())"
      type: "int"
    - name: "amode"
      description: "amode(0:连续模式;1:单段模式;2:MDI)"
      xQuery: "number(/ncda/amode/text())"
      type: "int"
    - name: "mmode"
      description: "mmode(1:手动连续模式;2:手动增量模式;3:手轮模式)"
      xQuery: "number(/ncda/mmode/text())"
      type: "int"


- name: "laser"
  description: "激光电压"
  requestFormat: "<laser><auto>yes</auto></laser>\n"
  responseIf: "count(/laser) > 0"
  items:
    - name: "laser_act1"
      description: "通道1实际功率"
      xQuery: "number(/laser/act1/text())"
      type: "int"
    - name: "laser_act2"
      description: "通道2实际功率"
      xQuery: "number(/laser/act2/text())"
      type: "int"
    - name: "laser_act3"
      description: "通道3实际功率"
      xQuery: "number(/laser/act3/text())"
      type: "int"
    - name: "laser_preset1"
      description: "通道1预设功率"
      xQuery: "number(/laser/preset1/text())"
      type: "int"
    - name: "laser_preset2"
      description: "通道2预设功率"
      xQuery: "number(/laser/preset2/text())"
      type: "int"
    - name: "laser_preset3"
      description: "通道3预设功率"
      xQuery: "number(/laser/preset3/text())"
      type: "int"


- name: "alarm"
  description: "报警信息"
  requestFormat: "<alarm><auto>yes</auto></alarm>\n"
  responseIf: "count(/alarm) > 0 and number(/alarm/no/text()) > 0"
  items:
    - name: "alarm_no"
      description: "报警号"
      xQuery: "number(/alarm/no/text())"
      type: "int"
    - name: "alarm_prio"
      description: "优先级"
      xQuery: "number(/alarm/prio/text())"
      type: "int"
    - name: "alarm_st"
      description: "通道(nc1、nc2...:表示CNC;plc:表示PLC)"
      xQuery: "string(/alarm/st/text())"
      type: "string"
    - name: "alarm_value"
      description: "报警参数(多个参数用;隔开)"
      xQuery: "string-join(/alarm/*[starts-with(name(), 'v')]/text(), ';')"
      type: "string"

